<%- include('../partials/header') %>

    <div class="container mt-3">
        <img src="/images/gardens/<%= garden.icon ? garden.icon : 'icon_00.png' %>" alt="garden icon" class="img-thumbnail float-end mt-3 garden-icon">
        <h2><%= garden.name %></h2>
        <p><%= garden.desc %> </p>
        <a href="/gardens/<%= garden.id %>/edit" class="btn btn-success me-3">Edit</a>
        <a href="/gardens/delete/<%= garden.id %>" class="btn btn-danger me-3">Delete</a>
        <% if (garden.sections && garden.sections.length > 0) { %>

        <% } %>
    </div>

    <hr>
    <div class="container mt-3">
        <h3>Garden Sections</h3>
        <table class="table table-hover table-striped align-middle">
            <thead>
                <tr>
                    <th scope="col">Name</th>
                    <th scope="col">Update Containers</th>
                    <th scope="col">Rename Section</th>
                    <th scope="col">Delete Section</th>
                </tr>
            </thead>
            <tbody class="table-group-divider">
                <% if (garden.sections && garden.sections.length > 0) { %>
                    <% garden.sections.sort((a, b) => {
                        const nameA = a.name.toUpperCase();
                        const nameB = b.name.toUpperCase();
                        if (nameA < nameB) return -1;
                        if (nameA > nameB) return 1;
                        return 0;
                    }); %>
                    <% garden.sections.forEach(s => { %>
                        <tr>
                            <td><%= s.name %></td>
                            <td></td>
                            <td><a href="/sections/<%= s.id %>/edit" class="btn btn-warning">Rename</a></td>
                            <td></td>
                        </tr>
                    <% }); %>
                <% } else { %>
                    <tr>
                        <td colspan="4">No sections have been added to this garden</td>
                    </tr>
                <% } %>
            </tbody>
        </table>
    </div>

    <form action="/gardens/<%= garden.id %>/sections" method="post">
        <div class="container mt-3 input-group">
            <input type="hidden" name="">
            <input type="text" name="name" placeholder="Section Name" aria-label="Recipient's username" required class="form-control">
            <input type="submit" value="Add Section" class="btn btn-outline-success">
        </div>
    </form>

<%- include('../partials/footer') %>